# Microservices TODO Application - Infrastructure Automation

## Table of Contents
- [Overview](#overview)
- [Requirements](#requirements)
- [Setup Instructions](#setup-instructions)
- [Infrastructure Architecture](#infrastructure-architecture)
- [Deployment Process](#deployment-process)
- [Environment Variables](#environment-variables)
- [Directory Structure](#directory-structure)

## Overview
This repository contains Terraform and Ansible configurations for automated provisioning and deployment of the Microservices TODO Application. The infrastructure-as-code implementation enables single-command deployment of cloud infrastructure and application services.

## Requirements

### Software Prerequisites
- [Terraform](https://www.terraform.io/downloads) >= 1.5.0
- [Ansible](https://docs.ansible.com/ansible/latest/installation_guide/index.html) >= 2.12.0
- [Cloud Provider CLI](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) (AWS/Azure/GCP)
- SSH Key Pair (public/private)

### Cloud Requirements
- Active cloud provider account
- IAM credentials with provisioning permissions
- Registered domain name for SSL configuration

## Setup Instructions

1. **Clone Repository**
   ```bash
   git clone https://github.com/favy12/ToDo-Infra.git
   cd ToDo-Infra

2. **Initialize Terraform**
   ```bash
   terraform init

3. **Configure Environment**

**Infrastructure Description**
Terraform Components

Compute Resources: EC2 instances/VM scale sets

Networking: VPC, security groups, load balancers

Storage: Managed disk volumes for persistent data

DNS: Automated domain record configuration

**Ansible Architecture**
-----------------------------------------------------------------------
Component	Purpose
-----------------------------------------------------------------------
dependencies role	Install Docker, Docker Compose, and system packages
-----------------------------------------------------------------------
deployment role	Clone app repo, start services
-----------------------------------------------------------------------
inventory directory	Dynamic host inventory generated by Terraform
-----------------------------------------------------------------------

**Deployment Process**
Execute full deployment pipeline:

   
   terraform apply -auto-approve

Verify application deployment:
   
   ansible-playbook -i inventory/hosts ansible/verify.yml

**Environment Variables**
# Cloud Credentials
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
TF_VAR_REGION=us-east-1

**Directory Structure**

## Project Structure with Annotations

```plaintext
.
├── ansible/                           # Ansible configuration management
│   ├── roles/
│   │   ├── dependencies/             # System dependencies installation
│   │   │   ├── defaults/             
│   │   │   └── tasks/                # Installation tasks
│   │   │       └── main.yml          # Main tasks: Docker + dependencies
│   │   └── deployment/               # Application deployment
│   │       ├── defaults/             # Deployment variables
│   │       └── tasks/
│   │           └── main.yml          # Deployment tasks: clone repo, start services
│   ├── inventory/
│   │   └── hosts                     # Generated inventory file (dynamic)
│   └── playbook.yml                  # Main Ansible entry point
│
├── terraform/                        # Infrastructure provisioning
│   ├── terraform.lock.hcl            # Dependency lock file
│   ├── main.tf                       # Core infrastructure resources
│   ├── outputs.tf                    # Output variables (IPs, URLs)
│   ├── provider.tf                   # Cloud provider configuration
│   ├── variables.tf                  # Input variables (instance size, region)
│   └── terraform.tfstate*            # State files (⚠️ DO NOT COMMIT ⚠️)
│
├── .gitignore                       # Version control exclusions:
│                                    # - terraform.tfstate*
│                                    # - .env files
│                                    # - Sensitive credentials
│
├── generate_inventory.sh            # Generates Ansible inventory from TF output
└── README.md                        # Project documentation (you are here)
```

### Critical File Details

1. **Ansible Role Structure**:
   ```plaintext
   roles/
   └── dependencies/
       └── tasks/main.yml        # Contains:
                                 # - apt package updates
                                 # - Docker CE installation
                                 # - Docker Compose setup
   ```

2. **Terraform Essentials**:
   ```plaintext
   provider.tf                   # Cloud credentials and region config
   variables.tf                  # Inputs: instance_type, domain_name, etc.
   main.tf                       # Defines: 
                                 # - VM instances
                                 # - Security groups
                                 # - DNS records
   ```

3. **State File Warning**:
   ```plaintext
   terraform.tfstate*            # Contains sensitive infrastructure data
                                 # Auto-generated - add to .gitignore
                                 # Managed remotely (S3/Cloud Storage) in prod
   ```

4. **Inventory Generation**:
   ```plaintext
   generate_inventory.sh         # Converts Terraform outputs to Ansible format:
                                 # - Extracts IP addresses
                                 # - Sets connection parameters
                                 # - Groups servers by role
   ```
